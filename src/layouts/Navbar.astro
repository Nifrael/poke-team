---
import { Image } from "astro:assets";
import Menu from "../assets/menu.svg";
import CloseMenu from "../assets/close-menu.svg";
---

<header class="bg-teal-50">
  <section
    class="md:max-w-[90dvw] mx-auto px-8 py-4 flex justify-between items-center"
  >
    <h2>
      <a href="/">🐦‍🔥 PokeTeam</a>
    </h2>
    <div>
      <Image
        src={Menu}
        id="hamburger-button"
        alt="Menu"
        class="cursor-pointer md:hidden"
      />
      <nav class="hidden md:block space-x-8 text-xl" aria-label="main">
        <a href="#" class="hover:opacity-90">Team</a>
        <a href="/combat" class="hover:opacity-90">Combats</a>
        <a href="#" class="hover:opacity-90">Statistiques</a>
      </nav>
    </div>
  </section>
  <section
    id="mobile-menu"
    class="absolute top-0 b-0 z-10 bg-indigo-200 w-full h-full text-5xl flex-col justify-content-center origin-top translate-y-full transition-transform duration-1000 ease-in-out"
  >
    <Image
      src={CloseMenu}
      alt="close-menu"
      class="cursor-pointer md:hidden self-end py-7 mx-8 scale-150"
    />
    <h2 class="mx-auto">
      <a href="/">🐦‍🔥 PokeTeam 🐦‍🔥</a>
    </h2>
    <nav
      class="flex flex-col min-h-screen items-center py-8"
      arial-label="mobile"
    >
      <h3 class="w-full text-center py-6 hover:opacity-90">
        <a href="#"> Team </a>
      </h3>
      <h3 class="w-full text-center py-6 hover:opacity-90">
        <a href="/combat" class="w-full text-center py-6 hover:opacity-90">
          Combat
        </a>
      </h3>
      <h3 class="w-full text-center py-6 hover:opacity-90">
        <a href="#" class="w-full text-center py-6 hover:opacity-90">
          Statistiques
        </a>
      </h3>
    </nav>
  </section>
</header>

<script>
  function listenMenu() {
    const hamburgerBtn = document.getElementById("hamburger-button");
    const mobileMenu = document.getElementById("mobile-menu");
    const body = document.querySelector("body");

    const toggleMenu = () => {
      mobileMenu?.classList.toggle("translate-y-full");
      mobileMenu?.classList.toggle("translate-y-0");
      body?.classList.toggle("opened-menu");
    };

    hamburgerBtn?.addEventListener("click", toggleMenu);
    mobileMenu?.addEventListener("click", toggleMenu);
  }

  document.addEventListener("DOMContentLoaded", listenMenu);
  document.addEventListener("astro:after-swap", listenMenu);
</script>
